(executable
 (name server)
 (libraries memoir_lib dream lwt)
 (modes byte exe))

(executable
 (name generator)
 (libraries memoir_lib js_of_ocaml)
 (modes byte exe))

(rule
 (targets generator.bc.js)
 (action
  (run %{bin:js_of_ocaml} --source-map %{dep:generator.bc} -o %{targets})))

(rule
 (targets server.bc.js)
 (action
  (run %{bin:js_of_ocaml} --source-map %{dep:server.bc} -o %{targets})))
